import { expect } from "chai";import { ethers } from "hardhat";import { setup } from "./00_fixture";
describe("T29 double slash",()=>{it("second slash has no effect",async()=>{const ctx=await setup();const [admin] = [ctx.admin];const owner=ctx.users[0];await ctx.kyc.connect(ctx.kycVerifier).mint(await owner.getAddress(),"k");const stake=ethers.utils.parseEther("10000000");await ctx.validator.connect(owner).propose(await owner.getAddress(),{value: stake});await ctx.validator.connect(admin).slash(await owner.getAddress(),"bad");await expect(ctx.validator.connect(admin).slash(await owner.getAddress(),"bad")).to.be.reverted;});});
