import { expect } from "chai";import { ethers } from "hardhat";import { setup } from "./00_fixture";
describe("T32 double resign fails",()=>{it("reverts second resign",async()=>{const ctx=await setup();const owner=ctx.users[0];await ctx.kyc.connect(ctx.kycVerifier).mint(await owner.getAddress(),"k");const stake=ethers.utils.parseEther("10000000");await ctx.validator.connect(owner).propose(await owner.getAddress(),{value: stake});await ctx.validator.connect(owner).resign(await owner.getAddress());await expect(ctx.validator.connect(owner).resign(await owner.getAddress())).to.be.reverted;});});
